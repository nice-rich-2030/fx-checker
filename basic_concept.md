# チャンス通貨記録ツール機能仕様書

## 1. 概要
上級者向けFXトレーダーを対象とした、時間足ごとのエントリーチャンス発見・記録・分析ツール。隙間時間での素早い記録と詳細なフィルタリング分析により、トレード機会の最適化を支援する。

## 2. 基本機能仕様

### 2.1 通貨ペア記録機能
**機能概要**: 主要通貨ペアの登録・編集・削除管理

**データ項目**:
- 通貨ペア名（例：USD/JPY、EUR/USD等）
- 表示順序（ユーザー定義）
- アクティブ/非アクティブ状態

**操作仕様**:
- デフォルト28通貨ペア事前登録
- カスタム通貨ペア追加（仮想通貨対応）
- ドラッグ&ドロップ表示順変更
- 一括選択による表示/非表示切替

### 2.2 時間足記録機能
**機能概要**: マルチタイムフレーム分析対応の時間足管理

**対応時間足**:
- 標準：15M, 30M, 1H, 4H, 1D

**データ項目**:
- 時間足種別

### 2.3 エントリーパターン機能
**機能概要**: テクニカル分析パターンの体系的分類・記録

**プリセットパターン**:
- **リバーサルパターン**: H&S, 逆H&S, ダブルトップ, ダブルボトム, トリプルトップ, トリプルボトム
- **継続パターン**: フラッグ, ペナント, ウェッジ, 三角形, レクタングル
- **N字パターン**: N字上昇, N字下降, W字, M字
- **ハーモニックパターン**: ガートレー, バット, バタフライ, クラブ
- **その他**: ブレイクアウト, プルバック, 押し目買い, 戻り売り

**カスタムパターン**:
- ユーザー定義パターン追加
- パターン説明文（任意）
- 信頼度設定（1-5段階）

### 2.4 エントリー方向記録機能
**機能概要**: ポジション方向と根拠の記録

**データ項目**:
- 方向：ロング/ショート
- 根拠メモ（任意、最大200文字）

### 2.5 一覧表示機能
**機能概要**: 多角的データ可視化による分析支援

#### 2.5.1 カレンダー表示
- 月間カレンダーでの記録一覧
- 日別チャンス件数表示
- 色分け表示（通貨ペア別、パターン別、方向別）
- 日別詳細ポップアップ表示

#### 2.5.2 月間集計
- 通貨ペア別チャンス件数
- パターン別分布
- 時間足別分布
- 成功率（実トレード実行時）

#### 2.5.3 円グラフ表示
- 通貨ペア構成比
- エントリーパターン構成比
- 時間足構成比
- ロング/ショート比率

### 2.6 フィルター表示機能
**機能概要**: 高度な検索・絞り込み機能

**フィルター条件**:
- **基本条件**: 通貨ペア, 時間足, エントリーパターン, 方向

**フィルター操作**:
- クイックフィルター（ワンタップ）
- 詳細フィルター（複数条件）
- フィルター設定保存（最大10件）

## 3. 画面構成・UI設計

### 3.1 メイン画面
- ヘッダー：現在日時
- クイック記録エリア：通貨ペア選択→時間足選択→パターン選択→方向選択→保存
- 本日のチャンス一覧（最新5件）
- 下部タブ：記録、一覧、分析、設定

### 3.2 記録画面
- 通貨ペア選択（グリッド表示、検索対応）
- 時間足選択（ボタン形式）
- エントリーパターン選択（カテゴリ分類）
- エントリー方向選択（ロング/ショート）
- 詳細設定（確信度、メモ）

### 3.3 一覧画面
- 表示切替タブ（カレンダー、リスト、グラフ）
- フィルターボタン（現在の条件表示）
- ソート機能（日時、通貨ペア、パターン）
- 詳細表示モーダル

### 3.4 分析画面
- 期間選択（週、月、3ヶ月、6ヶ月、年）
- 統計情報（総件数、平均/日、最多通貨ペア等）
- チャート表示（円グラフ、棒グラフ、推移グラフ）
- エクスポート機能（CSV、画像）

## 4. 詳細操作手順

### 4.1 各機能の操作手順

#### 4.1.1 通貨ペア管理操作
1. 設定画面→「通貨ペア管理」選択
2. 「＋追加」ボタンで新規追加
3. 通貨ペア名入力（自動補完対応）
4. カテゴリ選択、スプレッド入力（任意）
5. 「保存」で登録完了
6. 並び替え：項目を長押し→ドラッグで移動
7. 編集：項目タップ→編集画面
8. 削除：項目を左スワイプ→削除確認

#### 4.1.2 チャンス記録操作
1. メイン画面「＋記録」ボタンまたは記録タブ選択
2. 通貨ペア選択：グリッドから選択またはサーチボックスで検索
3. 時間足選択：ボタンをタップ（複数選択可）
4. エントリーパターン選択：カテゴリ→具体的パターン選択
5. エントリー方向選択：ロング/ショートボタン
6. 詳細設定（任意）：
   - 確信度スライダー調整
   - メモ入力
7. 「保存」ボタンで記録完了

#### 4.1.3 フィルター操作
1. 一覧画面「フィルター」ボタン選択
2. クイックフィルター：プリセット条件から選択
3. 詳細フィルター：
   - 「詳細」タブ選択
   - 各条件項目で値設定
   - AND条件
   - 「適用」で結果表示
4. フィルター保存：「保存」→名前入力→保存完了
5. 保存済みフィルター使用：「保存済み」タブ→選択

#### 4.1.4 データ分析操作
1. 分析タブ選択
2. 期間設定：プリセットまたはカスタム期間選択
3. 表示形式選択：
   - 統計情報：数値データ表示
   - 円グラフ：構成比表示
   - 棒グラフ：件数比較
   - 推移グラフ：時系列変化
4. データエクスポート：「エクスポート」→形式選択→保存

### 4.2 全機能を通した標準操作フロー

#### 4.2.1 初期セットアップフロー
1. アプリ起動
2. 利用規約確認・同意
3. 通貨ペア設定：
   - デフォルト28ペア確認
   - 不要ペア非表示設定
   - 追加ペア登録（必要に応じて）
   - 表示順序調整
4. エントリーパターン設定：
   - プリセットパターン確認
   - カスタムパターン追加（必要に応じて）
   - 優先度設定
5. 時間足設定：
   - 使用時間足選択
   - 優先度設定
6. 通知設定：
   - 通知時間設定

#### 4.2.2 日常利用フロー
1. **朝の市場分析**：
   - アプリ起動
   - 前日記録確認（一覧画面）
   - 重要通貨ペアのチャンス事前記録

2. **トレード中の記録**：
   - チャンス発見時、即座に記録画面
   - 通貨ペア→時間足→パターン→方向の順で高速入力
   - 必要に応じて確信度・メモ追加

3. **トレード後の確認**：
   - エントリー実行時、記録にマーク追加
   - 結果記録（成功/失敗）
   - 振り返りメモ追加

4. **週末の分析**：
   - 分析画面で週間データ確認
   - 最多チャンス通貨ペア特定
   - 成功率の高いパターン分析
   - フィルター機能で詳細検証
   - 来週の戦略立案

#### 4.2.3 月次分析フロー
1. 月間統計確認：
   - 分析画面で月間データ表示
   - 円グラフで通貨ペア・パターン構成比確認
   - 推移グラフで傾向分析
2. 詳細検証：
   - 高成功率条件をフィルターで抽出
   - 問題パターンの特定と改善点検討
3. データエクスポート：
   - CSV形式で月間データ出力
   - 外部ツールでの詳細分析
4. 設定見直し：
   - 使用頻度の低い通貨ペア整理
   - 新規パターン追加検討




## 5. データ構造

### 5.1 メインレコード構造
```
チャンス記録テーブル
- record_id (自動採番)
- currency_pair (通貨ペア)
- timeframe (時間足)
- pattern (エントリーパターン)
- direction (ロング/ショート)
- confidence (確信度 1-5)
- reliability (信頼度 1-5)
- memo (メモ 最大200文字)
- created_at (記録日時)
- trade_executed (実行フラグ)
- trade_result (成功/失敗)
- updated_at (更新日時)
```

### 5.2 マスターデータ構造
```
通貨ペアマスター
- pair_id
- pair_name
- category (メジャー/マイナー/エキゾチック)
- spread_info
- display_order
- is_active

パターンマスター
- pattern_id
- pattern_name
- category
- description
- default_reliability
- is_custom
```


この仕様書により、上級者トレーダーの詳細な分析ニーズに対応し、効率的なチャンス記録・検証が可能となります。